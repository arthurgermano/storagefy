import{e as Ne,b as _e,h as T,a as be,E as $e,H as Me,c as me,r as X,s as Z,d as B,f as P,g as x,p as J,U as Re,i as H,j as S,k as he,l as ke,m as ge,n as ne,I as K,o as ye,q as re,t as Ce,u as De,v as qe,w as He,x as Le,y as Ue,z as Fe,A as Oe,B as Be,C as Ve,D as z,F as Ye,G as Q,J as ae,K as te,L as ze,M as Pe,N as xe,O as Ge,P as L,Q as Ke,R as We,S as Xe,T as Ze,V as Je,W as Qe,X as se,Y as D,Z as je,_ as V,$ as k,a0 as w,a1 as N,a2 as ie,a3 as W,a4 as le}from"./render.EP_xMqk-.js";import{g as et}from"./index.DTlprtOV.js";import tt from"./LocalStorageAdapter.DbWFQp1Z.js";import"./IndexedDBAdapter.JOio7YFv.js";import"./StorageAdapter.-Hf96jOd.js";import"./generateSimpleId.1pzoLIeQ.js";import"./sleep.B0B6IrN2.js";import"./SessionStorageAdapter.CH8sEP9e.js";import"./ReactAdapter.DGmXLvKE.js";import"./assign.MzTrJBn8.js";const nt="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(nt);Ne();function rt(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function oe(n,e,[t,r]=[0,0]){T&&t===0&&be();var l=n,a=null,o=null,c=Re,d=t>0?$e:0,f=!1;const s=(u,p=!0)=>{f=!0,_(p,u)},_=(u,p)=>{if(c===(c=u))return;let i=!1;if(T&&r!==-1){if(t===0){const m=l.data;m===Me?r=0:m===me?r=1/0:(r=parseInt(m.substring(1)),r!==r&&(r=c?1/0:-1))}const b=r>t;!!c===b&&(l=X(),Z(l),B(!1),i=!0,r=-1)}c?(a?P(a):p&&(a=x(()=>p(l))),o&&J(o,()=>{o=null})):(o?P(o):p&&(o=x(()=>p(l,[t+1,r]))),a&&J(a,()=>{a=null})),i&&B(!0)};_e(()=>{f=!1,e(s),f||_(null,null)},d),T&&(l=H)}function at(n,e,t,r){for(var l=[],a=e.length,o=0;o<a;o++)qe(e[o].e,l,!0);var c=a>0&&l.length===0&&t!==null;if(c){var d=t.parentNode;He(d),d.append(t),r.clear(),$(n,e[0].prev,e[a-1].next)}Le(l,()=>{for(var f=0;f<a;f++){var s=e[f];c||(r.delete(s.k),$(n,s.prev,s.next)),Ue(s.e,!c)}})}function fe(n,e,t,r,l,a=null){var o=n,c={flags:e,items:new Map,first:null};T&&be();var d=null,f=!1,s=he(()=>{var _=t();return Be(_)?_:_==null?[]:ye(_)});_e(()=>{var _=S(s),u=_.length;if(f&&u===0)return;f=u===0;let p=!1;if(T){var i=o.data===me;i!==(u===0)&&(o=X(),Z(o),B(!1),p=!0)}if(T){for(var b=null,m,v=0;v<u;v++){if(H.nodeType===8&&H.data===ke){o=H,p=!0,B(!1);break}var g=_[v],M=r(g,v);m=Se(H,c,b,null,g,M,v,l,e,t),c.items.set(M,m),b=m}u>0&&Z(X())}T||st(_,c,o,l,e,r,t),a!==null&&(u===0?d?P(d):d=x(()=>a(o)):d!==null&&J(d,()=>{d=null})),p&&B(!0),S(s)}),T&&(o=H)}function st(n,e,t,r,l,a,o){var c=n.length,d=e.items,f=e.first,s=f,_,u=null,p=[],i=[],b,m,v,g;for(g=0;g<c;g+=1){if(b=n[g],m=a(b,g),v=d.get(m),v===void 0){var M=s?s.e.nodes_start:t;u=Se(M,e,u,u===null?e.first:u.next,b,m,g,r,l,o),d.set(m,u),p=[],i=[],s=u.next;continue}if(it(v,b,g),(v.e.f&K)!==0&&P(v.e),v!==s){if(_!==void 0&&_.has(v)){if(p.length<i.length){var C=i[0],I;u=C.prev;var Y=p[0],h=p[p.length-1];for(I=0;I<p.length;I+=1)ue(p[I],C,t);for(I=0;I<i.length;I+=1)_.delete(i[I]);$(e,Y.prev,h.next),$(e,u,Y),$(e,h,C),s=C,u=h,g-=1,p=[],i=[]}else _.delete(v),ue(v,s,t),$(e,v.prev,v.next),$(e,v,u===null?e.first:u.next),$(e,u,v),u=v;continue}for(p=[],i=[];s!==null&&s.k!==m;)(s.e.f&K)===0&&(_??=new Set).add(s),i.push(s),s=s.next;if(s===null)continue;v=s}p.push(v),u=v,s=v.next}if(s!==null||_!==void 0){for(var y=_===void 0?[]:ye(_);s!==null;)(s.e.f&K)===0&&y.push(s),s=s.next;var A=y.length;if(A>0){var R=null;at(e,y,R,d)}}re.first=e.first&&e.first.e,re.last=u&&u.e}function it(n,e,t,r){De(n.v,e),n.i=t}function Se(n,e,t,r,l,a,o,c,d,f){var s=(d&Fe)!==0,_=(d&Oe)===0,u=s?_?ge(l):ne(l):l,p=(d&Ce)===0?o:ne(o),i={i:p,v:u,k:a,a:null,e:null,prev:t,next:r};try{return i.e=x(()=>c(n,u,p,f),T),i.e.prev=t&&t.e,i.e.next=r&&r.e,t===null?e.first=i:(t.next=i,t.e.next=i.e),r!==null&&(r.prev=i,r.e.prev=i.e),i}finally{}}function ue(n,e,t){for(var r=n.next?n.next.e.nodes_start:t,l=e?e.e.nodes_start:t,a=n.e.nodes_start;a!==r;){var o=Ve(a);l.before(a),a=o}}function $(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function lt(n=!1){const e=z,t=e.l.u;if(!t)return;let r=()=>Pe(e.s);if(n){let l=0,a={};const o=xe(()=>{let c=!1;const d=e.s;for(const f in d)d[f]!==a[f]&&(a[f]=d[f],c=!0);return c&&l++,l});r=()=>S(o)}t.b.length&&Ye(()=>{ce(e,r),ae(t.b)}),Q(()=>{const l=te(()=>t.m.map(ze));return()=>{for(const a of l)typeof a=="function"&&a()}}),t.a.length&&Q(()=>{ce(e,r),ae(t.a)})}function ce(n,e){if(n.l.s)for(const t of n.l.s)S(t);e()}function ot(n){z===null&&rt(),Ge&&z.l!==null?ft(z).m.push(n):Q(()=>{const e=te(n);if(typeof e=="function")return e})}function ft(n){var e=n.l;return e.u??={a:[],b:[],m:[]}}function Ie(n,e,t){if(n==null)return e(void 0),L;const r=te(()=>n.subscribe(e,t));return r.unsubscribe?()=>r.unsubscribe():r}const q=[];function Ee(n,e=L){let t=null;const r=new Set;function l(c){if(Ke(n,c)&&(n=c,t)){const d=!q.length;for(const f of r)f[1](),q.push(f,n);if(d){for(let f=0;f<q.length;f+=2)q[f][0](q[f+1]);q.length=0}}}function a(c){l(c(n))}function o(c,d=L){const f=[c,d];return r.add(f),r.size===1&&(t=e(l,a)||L),c(n),()=>{r.delete(f),r.size===0&&t&&(t(),t=null)}}return{set:l,update:a,subscribe:o}}function ut(n){let e;return Ie(n,t=>e=t)(),e}let j=Symbol();function ve(n,e,t){const r=t[e]??={store:null,source:ge(void 0),unsubscribe:L};if(r.store!==n&&!(j in t))if(r.unsubscribe(),r.store=n??null,n==null)r.source.v=void 0,r.unsubscribe=L;else{var l=!0;r.unsubscribe=Ie(n,a=>{l?r.source.v=a:Ze(r.source,a)}),l=!1}return n&&j in t?ut(n):S(r.source)}function ct(){const n={};function e(){We(()=>{for(var t in n)n[t].unsubscribe();Xe(n,j,{enumerable:!1,value:!0})})}return[n,e]}let de=null,ee=null;function vt(){de=new tt({dbName:"storagefy_svelte_test",storeName:"storagefy_svelte_test_db",description:"Storagefy Svelte database",adapter:"localStorage",channelName:"storagefy_svelte_test_channel",version:1,encrypt:!1,enableSyncTabs:!0}),ee=new et({adapter:de,fresh:!0})}vt();const E=Ee({items:[]});E.$id="Svelte_CartStore_App";let pe=!1;async function Te(){try{return pe||(await ee.getFromStorage(E,E.$id),await ee.setInStorage(E,E.$id,{syncTabs:!0}),pe=!0),{cartStore:E,loadStores:Te}}catch(n){console.error(n)}}Te();var dt=V('<div class="item"><span> </span> <button>Add</button></div>'),pt=V('<div class="item"><span> </span> <button>Remove</button></div>'),_t=V('<!> <button class="clear">Clear Cart</button>',1),bt=V("<div>No items in cart</div>"),mt=V('<section class="shop-demo"><h2>üõçÔ∏è Mini Shop Demo</h2> <div class="store"><div class="items"><h3>üõí Items</h3> <!></div> <div class="cart"><h3>üß∫ Cart</h3> <!></div></div></section>');function $t(n,e){Je(e,!1);const[t,r]=ct(),l=()=>ve(o,"$isMounted",t),a=()=>ve(E,"$cartStore",t),o=Ee(!1),c=[{id:1,name:"Wireless Mouse",price:29.99},{id:2,name:"Mechanical Keyboard",price:79.99},{id:3,name:"USB-C Hub",price:49.99},{id:4,name:"Monitor Stand",price:39.99}],d=i=>{E.update(b=>{const m=b.items.find(v=>v.id===i.id);return m?m.qty++:b.items.push({...i,qty:1}),b})},f=i=>{E.update(b=>(b.items=b.items.filter(m=>m.id!==i),b))},s=()=>{E.update(i=>(i.items=[],i))};ot(async()=>{o.set(!0)}),lt();var _=Qe(),u=se(_);{var p=i=>{var b=mt(),m=k(w(b),2),v=w(m),g=k(w(v),2);fe(g,1,()=>c,h=>h.id,(h,y)=>{var A=dt(),R=w(A),U=w(R);N(R);var F=k(R,2);N(A),ie(O=>le(U,`${S(y).name??""} ‚Äî $${O??""}`),[()=>S(y).price.toFixed(2)],he),W("click",F,()=>d(S(y))),D(h,A)}),N(v);var M=k(v,2),C=k(w(M),2);{var I=h=>{var y=_t(),A=se(y);fe(A,1,()=>a().items,U=>U.id,(U,F)=>{var O=pt(),G=w(O),Ae=w(G);N(G);var we=k(G,2);N(O),ie(()=>le(Ae,`${S(F).name??""} √ó ${S(F).qty??""}`)),W("click",we,()=>f(S(F).id)),D(U,O)});var R=k(A,2);W("click",R,s),D(h,y)},Y=h=>{var y=bt();D(h,y)};oe(C,h=>{a()?.items?.length?h(I):h(Y,!1)})}N(M),N(m),N(b),D(i,b)};oe(u,i=>{l()&&i(p)})}D(n,_),je(),r()}export{$t as default};
