const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/IndexedDBAdapter.DNyZYEkw.js","_astro/StorageAdapter.DFwS-N09.js","_astro/_commonjsHelpers.Cpj98o6Y.js"])))=>i.map(i=>d[i]);
import{_ as w}from"./preload-helper.BmH1I9yD.js";document.addEventListener("DOMContentLoaded",async function(){try{let o=function(){d.style.backgroundColor="#6a7b8c",r.style.opacity="0",s.style.opacity="1",l.style.opacity="1"},f=function(){d.style.backgroundColor="#87CEEB",r.style.opacity="1",s.style.opacity="0",l.style.opacity="0"},m=function(e=!1){n&&n.pause(),n=anime.createTimeline({easing:"easeInOutQuad",onComplete:async function(){await t.set("isRainy",!0),e||t.emitDataChange("isRainy",!0,"toRainy"),i()}}),n.add(d,{backgroundColor:"#6a7b8c"},0).add(r,{opacity:0},0).add(s,{opacity:1},0).add(l,{opacity:1},0)},c=function(e){n&&n.pause(),n=anime.createTimeline({easing:"easeInOutQuad",onComplete:async function(){await t.set("isRainy",!1),e||t.emitDataChange("isRainy",!1,"toSunny"),i()}}),n.add(d,{backgroundColor:"#87CEEB"},0).add(r,{opacity:1},0).add(s,{opacity:0},0).add(l,{opacity:0},0)};var R=o,k=f,v=m,B=c;await new Promise((e,y)=>{const u=document.createElement("script");u.src="https://cdn.jsdelivr.net/npm/animejs@4.0.1/lib/anime.iife.min.js",u.onload=e,u.onerror=y,document.head.appendChild(u)});const C=(await w(()=>import("./IndexedDBAdapter.DNyZYEkw.js"),__vite__mapDeps([0,1,2]))).default,t=new C({dbName:"animation-demo-IDB",expireCheckInterval:0,channelName:"weather-channel"});await t.waitReadiness();const r=document.querySelector(".sun"),s=document.querySelector(".cloud"),l=document.querySelector(".raindrops"),d=document.querySelector(".sky"),g=document.getElementById("toggle-cycle"),E=document.getElementById("reset-cycle"),p=document.getElementById("toggle-encrypt"),S=document.getElementById("storage-content");let a=!1,n=null;async function i(){const e=await t.list();S.textContent=JSON.stringify(e,null,2)}async function h(){const e=await t.get("isRainy");e!==null&&(a=e,a?o():f()),i()}g.addEventListener("click",function(){a=!a,a?m():c()}),E.addEventListener("click",async function(){await t.clear(),a=!1,c(),i()}),p.addEventListener("click",async function(){E.click(),t.encrypt?(p.textContent="Turn Encryption ON",t.encrypt=!1):(p.textContent="Turn Encryption OFF",t.encrypt=!0),g.click()}),h(),t.onDataChanged(async e=>{try{if(e.origin==="reset"){await t.clear(),i();return}await t.set("isRainy",e.value),a=e.value,e.value?m(!0):c(!0)}catch(y){throw console.error("Error handling data change:",y),y}})}catch(o){console.error("Error initializing demo:",o)}});
